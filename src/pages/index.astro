---
import Layout from '../layouts/Layout.astro';
import ProductSearch from "../components/productSearch/ui/ProductSearch.tsx";
import UserMenu from "../components/user/UserMenu.tsx";
---

<Layout>
	<div class="grid h-screen grid-rows-[auto_1fr_auto] overflow-hidden">
		<!-- Header -->
		<header>
			<div class="flex items-center justify-between p-4">
				<div class="flex items-center gap-3">
					<div class="h-6 w-6 rounded bg-slate-900"></div>
					<div class="text-lg font-semibold">ThirdShop</div>
				</div>
				<UserMenu client:load />
			</div>
		</header>

		<!-- Main content: centered columns; internal components handle their own overflow -->
		<main class="mx-auto flex flex-col w-full gap-8 overflow-hidden p-4 md:grid-cols-2">
			<section class="grid content-start gap-4 overflow-hidden max-w-5xl mx-auto">
				<ProductSearch client:load />
			</section>

			<section id="why-section" class="grid content-start gap-3 overflow-hidden mt-auto">
				<h2 class="text-xl font-semibold">Pourquoi ThirdShop</h2>
				<div class="grid content-start grid-cols-3 gap-4 overflow-auto">
					<div class="relative rounded-lg border border-slate-200 bg-white p-4 shadow-sm">
						<div class="absolute left-3 top-3" aria-hidden="true">
							<div class="h-1.5 w-14 rounded-full bg-gradient-to-r from-rose-200 to-blue-200"></div>
						</div>
						<div class="pt-6">
							<div class="text-sm font-semibold text-slate-900">Base mondiale des produits</div>
							<p class="mt-1 text-sm text-slate-600">Une source unique pour retrouver, comparer et référencer tous les produits.</p>
						</div>
					</div>

					<div class="relative rounded-lg border border-slate-200 bg-white p-4 shadow-sm">
						<div class="absolute left-3 top-3" aria-hidden="true">
							<div class="h-1.5 w-14 rounded-full bg-gradient-to-r from-rose-200 to-blue-200"></div>
						</div>
						<div class="pt-6">
							<div class="text-sm font-semibold text-slate-900">Composants et pièces</div>
							<p class="mt-1 text-sm text-slate-600">Cartographier la composition, variantes et pièces compatibles.</p>
							<div class="mt-2 flex flex-wrap gap-2">
								<span class="inline-flex items-center rounded-full bg-emerald-50 px-2 py-0.5 text-xs text-emerald-700 ring-1 ring-emerald-200">Compatibilité</span>
								<span class="inline-flex items-center rounded-full bg-sky-50 px-2 py-0.5 text-xs text-sky-700 ring-1 ring-sky-200">Références</span>
								<span class="inline-flex items-center rounded-full bg-violet-50 px-2 py-0.5 text-xs text-violet-700 ring-1 ring-violet-200">Variantes</span>
							</div>
						</div>
					</div>

					<div class="relative rounded-lg border border-slate-200 bg-white p-4 shadow-sm">
						<div class="absolute left-3 top-3" aria-hidden="true">
							<div class="h-1.5 w-14 rounded-full bg-gradient-to-r from-rose-200 to-blue-200"></div>
						</div>
						<div class="pt-6">
							<div class="text-sm font-semibold text-slate-900">Docs et guides</div>
							<p class="mt-1 text-sm text-slate-600">Centraliser manuels, schémas et procédures pour intervenir rapidement.</p>
							<a href="#" class="mt-2 inline-flex text-xs font-medium text-slate-700 underline underline-offset-4 hover:text-slate-900">Voir un exemple</a>
						</div>
					</div>
				</div>
			</section>
		</main>

		<!-- Footer (compact, stays within viewport) -->
		<footer class="border-t border-slate-200">
			<div class="mx-auto max-w-5xl p-3 text-center text-xs text-slate-500">
				© 2025 ThirdShop — Base de connaissances produits.
			</div>
		</footer>
	</div>

	<script>
		window.addEventListener('product-search-focus', () => {
			const section = document.getElementById('why-section');
			if (section) section.classList.add('hidden');
		});
		window.addEventListener('product-search-blur', () => {
			const section = document.getElementById('why-section');
			if (section) section.classList.remove('hidden');
		});
	</script>
</Layout>
